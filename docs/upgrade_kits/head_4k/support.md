# KIT_009 iCub Head with 4K Cameras

!!! warning

    This UKIT is still a work in progress!

## Upgrade Kit

This upgrade kit is meant to update the head with new eyes composed by high-resolution cameras, bigger FOV lenses, new GPU, new accomodation for the COM-Express in the backpack, new design for the upper cover of the backpack.  

<center> ![](img/1.JPG) </center>

| | |
| :---: | :---: |
| IIT alias (used as ordering reference) | KIT_009 |
| Applicable to | iCub versions â‰¥ 2.x |
| Available onboard | â€“ |

|  #  |     Code   |   Alias  |  Rev | UM |  Qty  |  Description |
|   :---: |   :---: |   :---: |   :---: |   :---: |   :---: |   :---: |
| 1 |    | MKIT_009 |   | Pieces  |  1  |  |
|  2  | 17018 |		WKIT_009	 |	 	| Pieces	| 1	| iCub2.x, Basler cameras, GPU, and COM Express Type 10 (wiring) |
|  3  | 16519 |		EKIT_009	 |	 	| Pieces	| 1	| iCub2.x, Basler cameras, GPU, and COM Express Type 10 (electronics) |

## Content material  MKIT_009

<center> ![](img/3.JPG) </center>

| Alias                         | Description                                                                 | Code  | Rev | Qty |
|-------------------------------|-----------------------------------------------------------------------------|-------|-----|-----|
| RMB_UL_255X                    | RMB BEARING UL 255X                                                           | 2344  |   | 4   |
| V2-12--_-_ISO7045_CZ           | CROSS RECESSED SCREW ISO7045 M2X12 Z                                         | 2423  |     | 2   |
| V2-6--_-_ISO7045_CZ            | CROSS RECESSED SCREW ISO7045 M2X6 Z                                          | 2439  |     | 4   |
| V2-10--_-_ISO7046-1_CH         | CROSS RECESSED SCREW ISO7046-1 M2X10 H                                        | 2596  |     | 2   |
| G2-2--_-_U5923_G               | Set screw, hex socket, M2,0 x 2,0, stainless steel A2, DIN913, ISO4026, UNI5923 | 12766 |     | 4   |
| M3X06-6LOBE-ISO14581-A2-70     | M3 x  6 , ISO14581, 6LOBE socket countersunk flat head screw, f. threaded, A2-70 | 15831 |     | 2   |
| M1_6X04-6LOBE-ISO14583-A4-70   | M1.6 x  4 , ISO14583, 6LOBE socket pan head machine screw, fully threaded, A4-70 | 15841 |     | 2   |
| M2X08-6LOBE-ISO14583-A2-70     | M2 x  8 , ISO14583, 6LOBE socket pan head machine screw, fully threaded, A2-70 | 15854 |     | 4   |
| M2_5X06-6LOBE-ISO14583-A2-70   | M2_5 x  6, ISO14583, 6LOBE socket pan head machine screw, fully threaded, A2-70 | 15993 |     | 4   |
| M3X06-6LOBE-ISO14583-A2-70     | M3 x  6, ISO14583, 6LOBE socket pan head machine screw, fully threaded, A2-70 | 16022 |     | 4   |
| IC_034_G_007                   | Eye bulb with inserts                                                        | 18375 | 0   | 2   |
| IC_034_G_025                   | Orin NX support with inserts                                                 | 18384 | 0   | 1   |
| IC_034_M_020                   | V2 eye tilt brace A                                                          | 18385 | 0   | 1   |
| IC_034_P_017                   | Eye pan frame with protrusion                                                | 18386 | 0   | 2   |
| IC_034_P_019                   | Eye CCD mounting plate                                                       | 18387 | 0   | 2   |
| IC_034_P_020                   | Eye tilt brace A                                                             | 18388 | 0   | 1   |
| IC_034_P_021                   | Eyelid reinforcement                                                         | 18389 | 0   | 1   |
| IC_034_P_022                   | Eyelid upper                                                                 | 18390 | 0   | 1   |
| IC_034_P_023                   | Eye pan frame                                                                 | 18391 | 0   | 2   |
| IC_034_P_025                   | V2 eye pan rod                                                               | 18392 | 0   | 2   |
| IC_034_G_029                   | BASE FRAME for boards                                                        | 18400 | 0   | 1   |
| IC_034_G_030                   | Support for COM with inserts                                                 | 18401 | 0   | 1   |
| IC_034_G_031                   | Support for connector with inserts                                           | 18402 | 0   | 1   |
| IC_034_G_034                   | Cover backpack assy                                                          | 18405 | 0   | 1   |
## Content material  WKIT_009

|  Code  | BOM |  Alias | Rev |  Qty | Description      |
|:-----:|:---:|:--------------:|:---:|--------:|:------------------:|
| 10132 |     | 10132                       |     |  20,000 | Housing, Microfit, 2 contacts, 1   row, male, p.3mm, Straight, w to w, lock, key, 5A                 |
| 10879 |     | 10879                       |     |  20,000 | Crimp terminal, Pico-Lock,   female contacts, AWG24-28, 3A                                           |
| 11146 |     | MOLEX_504051-0401           |     |  10,000 | Housing, Pico-Lock, 4 contacts,   1 row, female, p.1.5mm, Straight, w to w / w to b, lock, nokey, 3A |
| 12070 |     | 12070                       |     |  0,1500 | FTP-LAN cable, Small Diameter   AWG28, CAT6                                                          |
| 16288 |     | AMPHENOL-FCI_10073599-006LF |     |  20,000 | Housing, MiniTek, 6 contacts, 2   row, female, p.2mm, Straight, w to w / w to b, nolock, nokey, 2A   |
| 328   |     | 328                         |     |  10,700 | PVC insulated cable, 1 pole,   0.25mmq, AWG23, 500V, black                                           |
| 4155  |     | 4155                        |     |  10,700 | PVC insulated cable, 1 pole,   0.25mmq, AWG23, 500V, yellow                                          |
| 4158  |     | 4158                        |     |  0,2000 | PVC insulated cable, 1 pole,   0.5mmq, AWG20, 500V, yellow                                           |
| 4411  |     | 4411                        |     |  0,2000 | PVC insulated cable, 1 pole,   0.5mmq, AWG20, 500V, black                                            |
| 502   |     | 502                         |     |  40,000 | Crimp terminal, Microfit, female   contacts, AWG20-24                                                |
| 510   |     | 510                         |     |  10,000 | Housing, Varilok, 2 contacts, 1   rows, p.5.08mm, Straight, w to w, lock, key, 8.5A                  |
| 5280  |     | SWITCHCRAFT-35RASMT4BHNTRX  |     |  10,000 | PCB connector, jack stereo, 5   contact, female, w to b, 90Â° nolock, nokey, diam 3.5mm, SMD          |
| 66    |     | 66                          |     |  0,1500 | Teflon insulated cable, 1 pole,   AWG26, 600V, white, UL E20042                                      |
| 68    |     | 68                          |     |  10,050 | Teflon insulated cable, 1 pole,   AWG26, 600V, black, UL E20042                                      |
| 69    |     | 69                          |     |  0,1500 | Teflon insulated cable, 1 pole,   AWG26, 600V, green, UL E20042                                      |
| 70    |     | 70                          |     |  0,2000 | Teflon insulated cable, 1 pole,   AWG26, 600V, yellow, UL E20042                                     |
| 7141  |     | 7141                        |     | 330,000 | Crimp terminal, FCI MiniTek,   female contact, AWG26-30                                              |
| 7142  |     | amphenol-fci_10073599-008LF |     |  10,000 | Housing, MiniTek, 8 contacts, 2   row, female, p.2mm, Straight, w to w / w to b, nolock, nokey, 2A   |
| 7143  |     | AMPHENOL-FCI_10073599-010LF |     |  20,000 | Housing, MiniTek, 10 contacts, 2   row, female, p.2mm, Straight, w to w / w to b, nolock, nokey, 2A  |
| 72    |     | 72                          |     |  0,6550 | Teflon insulated cable, 1 pole,   AWG26, 600V, red, UL E20042                                        |

| ðŸ”˜ Click to download the PDF |
| :---: |
| [![](img/4.JPG)](https://github.com/icub-tech-iit/electronics-wiring-public/blob/master/icub-upgrade-kits/kit_009/17018_0.0.0_Harness_WKIT_009_Cameras%20updrade%20kit.pdf) |

## Content material  EKIT_009 
|  Pieces |     Alias    |    Rev    |  Description       |  Code Wgst |
|   :---: |    :-----------:      |     :---: |   :---:   |   :---:   |
| 1 |PUIAUDIO_AS04004PO-2-R_SPKR|      |   Miniature speaker, 4R, 82dBA,200Hz, 3W,          | 12035 |
| 1 | 13463 |      | HMC mini PCIE to M.2 KEY E adapter | 13463 |
| 2 | 13570 | | Flexible WIFI Antenna 2.4-5GHz, 34.90*9mm, 200mm cable, MHF4 connector | 13570 |
| 1 | CONNECTTECH_CCG020 | | Carrier Board for COM-Express Type10, Connecttech CCG020 | 15301 |
| 1 | KONTRON_34099-0000-99-0_R2_1 | | COMe mini Active Uni Cooler (w/o HSP) | 15626 |
| 1 | CKG035 | | CableKit for Carrier Board COM-Express Type10, CCG020 | 15785 |
| 1 | ADVANTECH_SOM-7583C7-S8A1 | | COM-Express Type10, Advantech SOM i7-1185G7E 16GB DDR4, 64GB SSD | 16252 |
| 1 | 16433 | | Intel AX210, Mini PCI-e WiFi 6E, 2x2 AC + BT 5.2, M.2 2230 key E |   16433   |
| 2 | BASLER_2000036061 | | M12 Lens, Focus 2.1mm, Aperture 1.8 FOV 170 degree with IR cut filter, 1/3 | 16483 |
| 1 | 16487 | | NVIDIA JETSON XAVIER NX, 69.6mm x 45mm 260-pin SO-DIMM connector, 8 GB LPDDR4, 16GB eMMC | 16487 |
| 1 | 16488 | | NVIDIA Jetson Xavier NX Aluminum Heatsink with 36mm Fan for  with Long Cable | 16488 |
| 1 | CONNECTTECH_NGX014 | | Quark Carrier board for NVIDIAÂ® Jetson Nanoâ„¢ and Xavier NX Module, 5V input | 16518 |
| 2 | 16547 | | Camera Kit for NVIDIA Xavier NX or Jetson Nano, daA4200-30mci, M13B0618W, adapter board and 200mm flat cable |   16547   |

Draft Logic schematic

| ðŸ”˜ Click to download the PDF |
| :---: |
| [![](img/2.JPG)](https://github.com/icub-tech-iit/electronics-wiring-public/blob/master/icub-upgrade-kits/kit_009/16519_0.1_Logic_EKIT_009_Cameras%20upgrade%20kit.pdf) |

## Assembly instruction

### Assembly sequence
This upgrade kit is a radical change in the head. For the assembly sequence, refer to the repository  https://github.com/icub-tech-iit/cad-mechanics-public

## Kinematics

Due to mechanical design constraints, the kinematics of the upgraded head underwent slight changes. While the DH table is the same as the v2 (see: [Head V2 Kinematics](../../icub_kinematics/icub-forward-kinematics/icub-forward-kinematics-head.md)), the end-effector matrix changes to:

$$
\begin{equation}
T_E = 
\begin{bmatrix}
1 & 0 & 0 & 0 \\
0 & 1 & 0 & 0 \\
0 & 0 & 1 & -12.63mm \\
0 & 0 & 0 & 1 \\
\end{bmatrix}
\end{equation}
$$

To use the [gaze controller](https://robotology.github.io/robotology-documentation/doc/html/group__iKinGazeCtrl.html), it is required the instantiation of `head_version` `"v2.10"`, available since the distro release 2024.11.0.

## Software instructions

This UKIT also includes an additional [NVIDIA Jetson Orin NX](https://www.nvidia.com/en-us/autonomous-machines/embedded-systems/jetson-xavier-nx/) mounted on the top of the head, for handling the [FRAMOS-IMX415 cameras](https://www.framos.com/en/products/fsm-imx415-sensor-module-26361) and performing image processing on the onboard GPU. The Orin NX has to be configured following [the flash procedure](../../icub_operating_systems/icubos/jetpack.md) and then the guide to [configure the FRAMOS-IMX415](../../icub_operating_systems/icubos/setup-framos-imx415.md).

If the image has been [installed from scratch](../../icub_operating_systems/icubos/jetpack.md#flash-a-new-image-from-scratch), an initial configuration is also required, which consists in:

- Set the `icub` as `host` and `icub-head` as `hostname`.
- Configure the network.

For using the images provided by the new `FRAMOS-IMX415` camera over the YARP network, it is needed to compile and install [`yarp-device-argus`](https://github.com/robotology/yarp-device-argus/tree/main?tab=readme-ov-file#2-how-to-use-framos-cameras-as-a-yarp-device).
